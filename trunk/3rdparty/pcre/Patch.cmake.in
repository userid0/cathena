set( _SOURCE_DIR "@_SOURCE_DIR@" )

set( _TARGET "${_SOURCE_DIR}/CMakeLists.txt" )
if( NOT (EXISTS "${_TARGET}") )
	message( FATAL_ERROR "Cannot find ${_TARGET}" )
endif()

file( READ "${_TARGET}" _DATA )
# Remove CMAKE_DEBUG_POSTFIX
string( REPLACE "SET(CMAKE_DEBUG_POSTFIX \"d\")" "#=== Patch - remove CMAKE_DEBUG_POSTFIX ===" _DATA "${_DATA}" )
list( APPEND _DATA "#=== Patch - append BEGIN ===\n" )
# Normalize library name
list( APPEND _DATA
	"set_target_properties(pcre PROPERTIES PREFIX \"\")\n"
	"set_target_properties(pcre PROPERTIES OUTPUT_NAME pcre)\n"
	"set_target_properties(pcre PROPERTIES SUFFIX .lib)\n" )
list( APPEND _DATA "#=== Patch - append END ===\n" )
file( WRITE "${_TARGET}" ${_DATA} )
